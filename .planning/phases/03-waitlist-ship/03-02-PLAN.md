---
phase: 03-waitlist-ship
plan: 02
type: execute
wave: 2
depends_on:
  - "03-01"
files_modified:
  - app/layout.tsx
  - app/opengraph-image.tsx
  - app/twitter-image.tsx
  - app/page.tsx
  - components/sections/Hero.tsx
  - components/layout/Nav.tsx
  - components/layout/Footer.tsx
autonomous: false
requirements:
  - PERF-01
  - PERF-02
  - PERF-03
  - SEO-01
  - SEO-02

must_haves:
  truths:
    - "Page has correct meta title, description, OG tags, and Twitter card in HTML head"
    - "OG image generates a branded 1200x630 dark card with NOM branding"
    - "Page uses semantic HTML: one h1, h2 per section, nav/main/section/footer landmarks"
    - "All below-fold images have loading=lazy"
    - "Animations use only transform and opacity (no layout-triggering properties)"
  artifacts:
    - path: "app/opengraph-image.tsx"
      provides: "Generated OG image (1200x630) with NOM branding"
      exports: ["default", "alt", "size", "contentType"]
    - path: "app/twitter-image.tsx"
      provides: "Generated Twitter card image (1200x628)"
      exports: ["default", "alt", "size", "contentType"]
    - path: "app/layout.tsx"
      provides: "Updated metadata with metadataBase, title, description, openGraph, twitter"
      contains: "metadataBase"
  key_links:
    - from: "app/layout.tsx"
      to: "app/opengraph-image.tsx"
      via: "Next.js file convention auto-wiring"
      pattern: "metadataBase"
    - from: "app/layout.tsx"
      to: "app/twitter-image.tsx"
      via: "Next.js file convention auto-wiring"
      pattern: "summary_large_image"
---

<objective>
Add SEO metadata with OG/Twitter images, audit and fix semantic HTML structure, and validate performance targets (Lighthouse > 80, lazy loading, 60fps animations).

Purpose: The page must be launch-ready with proper social sharing cards, accessible structure, and fast loading on slow connections.
Output: OG + Twitter image files, updated layout metadata, audited semantic HTML, verified performance.
</objective>

<execution_context>
@/Users/ekitcho/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ekitcho/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-waitlist-ship/03-RESEARCH.md
@.planning/phases/03-waitlist-ship/03-01-SUMMARY.md
@app/layout.tsx
@app/page.tsx
@components/sections/Hero.tsx
@components/layout/Nav.tsx
@components/layout/Footer.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add SEO metadata, OG image, Twitter image, and fix semantic HTML</name>
  <files>app/layout.tsx, app/opengraph-image.tsx, app/twitter-image.tsx, app/page.tsx, components/sections/Hero.tsx, components/layout/Nav.tsx, components/layout/Footer.tsx</files>
  <action>
**1. Update `app/layout.tsx` metadata:**

Replace the existing `metadata` export with:

```typescript
export const metadata: Metadata = {
  metadataBase: new URL(process.env.NEXT_PUBLIC_SITE_URL ?? 'https://nomnomnom-delta.vercel.app'),
  title: 'N≈åM ‚Äî Scanne le menu. Comprends chaque plat.',
  description: "Scanne n'importe quel menu, comprends chaque plat en 50+ langues. Traductions, explications, recommandations ‚Äî instantan√©ment.",
  openGraph: {
    title: 'N≈åM ‚Äî Scanne le menu. Comprends chaque plat.',
    description: "Scanne n'importe quel menu, comprends chaque plat en 50+ langues.",
    locale: 'fr_FR',
    type: 'website',
    siteName: 'N≈åM',
  },
  twitter: {
    card: 'summary_large_image',
    title: 'N≈åM ‚Äî Scanne le menu. Comprends chaque plat.',
    description: "Scanne n'importe quel menu, comprends chaque plat en 50+ langues.",
  },
}
```

**2. Create `app/opengraph-image.tsx`:**

```typescript
import { ImageResponse } from 'next/og'

export const alt = 'N≈åM ‚Äî Scanne le menu. Comprends chaque plat.'
export const size = { width: 1200, height: 630 }
export const contentType = 'image/png'

export default function Image() {
  return new ImageResponse(
    // Dark branded card: #09090B background
    // Large "N≈åM" text in white (#FAFAFA), font-weight 900, ~72px
    // Tagline "Scanne le menu. Comprends chaque plat." in brand-orange (#FF6B35), ~28px
    // Subtitle "200 cuisines ¬∑ 50 langues ¬∑ Un seul geste" in muted (#71717A), ~18px
    // Food emoji row (üçú ü•ò üç£ ü•ô üçù) at bottom for visual interest, ~36px
    // All using inline style={{}} objects ‚Äî NO Tailwind (Satori constraint)
    // Centered vertically and horizontally with flexbox
    { ...size }
  )
}
```

**3. Create `app/twitter-image.tsx`:**

Same JSX content as opengraph-image.tsx but with `size = { width: 1200, height: 628 }` (Twitter's preferred aspect ratio).

**4. Semantic HTML audit and fixes:**

Read each section component and verify/fix:

- **`app/page.tsx`:** Ensure sections are rendered inside the `<main>` from layout.tsx (already done via `{children}`). No changes needed if sections are direct children.

- **`components/sections/Hero.tsx`:** Must have the ONLY `<h1>` on the page. If it uses `<h2>` or other, change to `<h1>`. Verify it wraps in `<section>`.

- **All other section components** (`DishCarousel`, `Features`, `ReverseSearch`, `Social`, `Pricing`, `Faq`, `FinalCta`): Each should use `<section>` wrapper (already have) and `<h2>` for their main heading. Audit each ‚Äî if any use `<h3>` as the primary heading, promote to `<h2>`.

- **`components/layout/Nav.tsx`:** Must use `<nav>` element (likely already does). Verify `<header>` or standalone `<nav>` tag.

- **`components/layout/Footer.tsx`:** Must use `<footer>` element (likely already does).

- **FinalCta.tsx** (already modified in 03-01): The waitlist section heading "Rejoins les premiers testeurs" should be `<h2>` not `<h3>`. The "Plus jamais hesiter" should also be `<h2>`. Fix if needed.

- **Heading hierarchy check:** Only ONE `<h1>` on the page (in Hero). All section headings are `<h2>`. Sub-headings within sections are `<h3>`.

**5. Performance: verify lazy loading on all images:**

Grep all `<img` tags across section components. Every image below the fold MUST have `loading="lazy"`. The hero image (first visible) should NOT have `loading="lazy"` (it should load eagerly for LCP).

Check all section components for `loading="lazy"` on `<img>` tags. Add where missing.

**6. Performance: verify animations use GPU-composited properties only:**

Grep for any CSS animation or motion/react `animate` props that use `height`, `width`, `margin`, `top`, `left`, `right`, `bottom`. These cause layout thrashing on mobile. Replace with `transform` + `opacity` equivalents. Exception: the FAQ accordion uses `motion` height animation ‚Äî this is acceptable if it uses `motion.div` with `layout` prop (motion/react handles this efficiently).
  </action>
  <verify>
1. `npm run build` succeeds ‚Äî OG image generates without error.
2. `npx tsc --noEmit` passes.
3. Run `curl -s http://localhost:3000 | grep -E '<title>|og:|twitter:'` to verify meta tags are present in HTML.
4. Grep for `<h1` across all files ‚Äî exactly one instance (in Hero).
5. Grep for `loading="lazy"` on all below-fold images.
  </verify>
  <done>
- layout.tsx has metadataBase + full OG/Twitter metadata
- opengraph-image.tsx generates 1200x630 branded card
- twitter-image.tsx generates 1200x628 branded card
- Exactly one h1 in Hero, all sections use h2, landmarks in place (nav, main, section, footer)
- All below-fold images have loading="lazy"
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Final QA ‚Äî visual, SEO, and performance verification</name>
  <files>app/layout.tsx, app/opengraph-image.tsx, app/twitter-image.tsx</files>
  <action>
Human verification of SEO, semantic HTML, and performance. All automated work is done in Task 1. This checkpoint verifies correctness visually and via Lighthouse.

What was built: Complete SEO setup (OG image, Twitter card, meta tags), semantic HTML structure, and performance optimizations across the entire landing page.
  </action>
  <verify>
1. SEO meta tags: Open the dev server (http://localhost:3000), view page source (Ctrl+U). Verify title contains "N≈åM ‚Äî Scanne le menu. Comprends chaque plat.", og:title/og:description/og:image/og:locale meta tags present, twitter:card is "summary_large_image".
2. OG image: Visit http://localhost:3000/opengraph-image ‚Äî dark card with "N≈åM" branding, tagline in orange, subtitle in muted gray.
3. Semantic HTML: In browser DevTools, check only ONE h1 on the page (in hero), each section has h2, page has nav/main/section/footer landmarks.
4. Performance: Chrome DevTools Lighthouse, Performance audit on mobile with simulated throttling. Target score > 80.
5. Cross-breakpoint: Check waitlist form and referral dashboard at 320px, 768px, 1280px.
  </verify>
  <done>User has approved SEO tags, OG image, semantic structure, performance score, and cross-breakpoint layout.</done>
</task>

</tasks>

<verification>
1. `npm run build` passes ‚Äî all OG/Twitter images generate
2. Meta tags present in rendered HTML
3. Semantic HTML: one h1, h2 per section, nav/main/footer landmarks
4. All below-fold images lazy-loaded
5. Lighthouse performance > 80 on mobile 3G simulation
6. No layout-triggering animations (transform + opacity only)
</verification>

<success_criteria>
- OG image renders at /opengraph-image with branded dark card
- Twitter card configured as summary_large_image
- Meta title is "N≈åM ‚Äî Scanne le menu. Comprends chaque plat."
- Exactly one h1 on page, all sections use h2, proper landmark elements
- All below-fold images have loading="lazy"
- Lighthouse mobile performance score > 80
</success_criteria>

<output>
After completion, create `.planning/phases/03-waitlist-ship/03-02-SUMMARY.md`
</output>
